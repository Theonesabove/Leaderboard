<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>OT Hours Leaderboard</title>
  <style>
    body {
      background: #111;
      color: white;
      font-family: Arial, sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    h1 {
      margin: 20px;
      color: #FFD700;
      text-shadow: 2px 2px #000;
    }
    svg {
      display: block;
      margin: auto;
      background: #2b2b2b;
      border-radius: 20px;
    }
    .leaderboard {
      width: 80%;
      margin: 20px auto;
      border-collapse: collapse;
    }
    .leaderboard th, .leaderboard td {
      border: 1px solid #555;
      padding: 8px;
    }
    .leaderboard th {
      background: #222;
      color: #FFD700;
    }
    .leaderboard tr:nth-child(even) { background: #2a2a2a; }
  </style>
</head>
<body>
  <h1>üèÅ OT Hours Leaderboard üèÅ</h1>

  <svg width="900" height="500" viewBox="0 0 900 500">
    <!-- Grass infield -->
    <rect x="0" y="0" width="900" height="500" fill="#0a0" />

    <!-- Track outline -->
    <ellipse cx="450" cy="250" rx="400" ry="180" fill="#333" stroke="#888" stroke-width="12"/>

    <!-- Finish line -->
    <rect x="445" y="70" width="10" height="60" fill="url(#checker)"/>

    <defs>
      <!-- Checkerboard pattern -->
      <pattern id="checker" width="10" height="10" patternUnits="userSpaceOnUse">
        <rect x="0" y="0" width="5" height="5" fill="black"/>
        <rect x="5" y="0" width="5" height="5" fill="white"/>
        <rect x="0" y="5" width="5" height="5" fill="white"/>
        <rect x="5" y="5" width="5" height="5" fill="black"/>
      </pattern>

      <!-- Track path -->
      <path id="trackPath" d="M 50 250 A 400 180 0 1 1 850 250 A 400 180 0 1 1 50 250 Z" fill="none" stroke="none"/>
    </defs>

    <!-- Cars (inserted via JS) -->
    <g id="cars"></g>
  </svg>

  <table class="leaderboard">
    <thead>
      <tr>
        <th>Rank</th>
        <th>Name</th>
        <th>Hours</th>
      </tr>
    </thead>
    <tbody id="ranking-body"></tbody>
  </table>

  <script>
    const data = [
      ["Noj Avendano, Luis Gerardo", 147.67],
      ["Salazar Towers, Julian David", 135.69],
      ["Real Losada, Alison Dahiann", 129.55],
      ["Almanza Lobo, Luis Daniel", 99.43],
      ["Mogotocoro, Julieth Lorena", 80.83],
      ["Ajquill Alvarez, Keren Daniela", 72.87],
      ["Alvarez Mendez, Johana Andrea", 63.37],
      ["Agreda Ayala, Pablo Jose", 56.5],
      ["Albarran Garcia, Santiago", 44.83],
      ["Alfonzo Tarquini, Jheanpaul Alejandro", 41.42],
      ["Alonso Rodriguez, Andres Felipe", 34.64],
      ["Alvarado Mendoza, Emsho Fidel", 16.88],
    ];

    const sorted = data.sort((a,b) => b[1] - a[1]);

    // Fill leaderboard table
    const tbody = document.getElementById("ranking-body");
    sorted.forEach((row, index) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `<td>${index+1}</td><td>${row[0]}</td><td>${row[1]}</td>`;
      tbody.appendChild(tr);
    });

    // Car colors for top 3
    const colors = ["red", "blue", "green"];
    const carsGroup = document.getElementById("cars");

    // Speed scaling
    const maxHours = sorted[0][1];
    const minHours = sorted[sorted.length-1][1];
    const minDur = 15; // fastest
    const maxDur = 30; // slowest

    function scaleDuration(hours) {
      return maxDur - (hours - minHours) * (maxDur - minDur) / (maxHours - minHours);
    }

    // SVG car shape (simplified stock car)
    function makeCarSVG(color, label) {
      const g = document.createElementNS("http://www.w3.org/2000/svg", "g");

      // Body
      const body = document.createElementNS("http://www.w3.org/2000/svg", "path");
      body.setAttribute("d", "M5 15 Q15 0 45 0 Q75 0 85 15 L85 25 Q75 35 45 35 Q15 35 5 25 Z");
      body.setAttribute("fill", color);
      g.appendChild(body);

      // Windows
      const win = document.createElementNS("http://www.w3.org/2000/svg", "rect");
      win.setAttribute("x", "25");
      win.setAttribute("y", "5");
      win.setAttribute("width", "35");
      win.setAttribute("height", "15");
      win.setAttribute("fill", "lightblue");
      g.appendChild(win);

      // Wheels
      const wheel1 = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      wheel1.setAttribute("cx", "20");
      wheel1.setAttribute("cy", "32");
      wheel1.setAttribute("r", "6");
      wheel1.setAttribute("fill", "black");
      g.appendChild(wheel1);

      const wheel2 = document.createElementNS("http://www.w3.org/2000/svg", "circle");
      wheel2.setAttribute("cx", "70");
      wheel2.setAttribute("cy", "32");
      wheel2.setAttribute("r", "6");
      wheel2.setAttribute("fill", "black");
      g.appendChild(wheel2);

      // Label above car
      const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
      text.setAttribute("x", "45");
      text.setAttribute("y", "-5");
      text.setAttribute("font-size", "8");
      text.setAttribute("fill", "white");
      text.setAttribute("text-anchor", "middle");
      text.textContent = label;
      g.appendChild(text);

      return g;
    }

    // Add top 3 cars
    sorted.slice(0,3).forEach((row, i) => {
      const [name, hours] = row;
      const dur = scaleDuration(hours).toFixed(2) + "s";
      const shortName = name.split(",")[0]; 

      const car = makeCarSVG(colors[i], `${shortName} (${hours}h)`);

      // Animate motion
      const animateMotion = document.createElementNS("http://www.w3.org/2000/svg", "animateMotion");
      animateMotion.setAttribute("dur", dur);
      animateMotion.setAttribute("repeatCount", "indefinite");

      const mpath = document.createElementNS("http://www.w3.org/2000/svg", "mpath");
      mpath.setAttributeNS("http://www.w3.org/1999/xlink", "href", "#trackPath");

      animateMotion.appendChild(mpath);
      car.appendChild(animateMotion);

      carsGroup.appendChild(car);
    });
  </script>
</body>
</html>
